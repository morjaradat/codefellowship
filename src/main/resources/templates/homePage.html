<!DOCTYPE html>
<html lang="en">
<head th:replace="fragments :: head"></head>
<body>
<header th:replace="fragments :: header"></header>
<main>
    <h1 class="page">Welcome to Home Page</h1>
<div>
    <form th:action="'/post/' + ${user.id}" method="POST">
        <label>Post description</label>
        <textarea name="body" id="body" placeholder="write your new post here"></textarea>
        <input type="submit" value="submit"/>
    </form>
</div>

    <section>
        <h3 th:text="${user.getUsername()+' posts'}"></h3>

        <div th:each="post :${user.posts}">
            <h5 th:text="${post.createdAt}"></h5>
            <p th:text="${post.body}"></p>
        </div>
    </section>
<hr/>
<!--    <div th:if="${#lists.contains(followers,follower)}" th:each="follower : ${followers}">-->
<!--        <h4 th:text="${follower.getUsername()}"></h4>-->
<!--        <form th:action="@{/unfollow}" method="POST">-->
<!--            <input th:value="${follower.getId()}" name="id" id="id" type="text" hidden/>-->
<!--            <input type="submit" value="unFollow"/>-->
<!--        </form>-->
<!--    </div>-->
<!--    th:if="${not #lists.contains(followers,follower)}"-->
    <hr/>
    <div  th:each="follower : ${followers}">
        <h4 th:text="${follower.getUsername()}"></h4>
        <form th:action="@{/follow}" method="POST">
            <input th:value="${follower.getId()}" name="id" id="id" type="text" hidden/>
            <input type="submit" value="Follow"/>
        </form>
    </div>
</main>
</body>
</html>